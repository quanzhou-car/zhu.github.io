<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³‰å·åŒ…è½¦/æ‹¼è½¦ä¸€æ—¥æ¸¸ | æ™ºèƒ½é¢„çº¦ç³»ç»Ÿ</title>
   
	<style>
       
		/* æ–°å¢é¡¶éƒ¨ä¿¡æ¯æ æ ·å¼ */
        .top-info-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: white;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .info-group {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        /* ç§»é™¤åŸæœ‰æµ®çª—æ ·å¼ */
        /* æ–°å¢æ•°æ®åº“é”™è¯¯æç¤ºæ ·å¼ */
        .error-message {
            color: #dc3545;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }
		
		/* åŸæœ‰æ ·å¼ä¿æŒä¸å˜ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #f8f9fa;
            line-height: 1.6;
            color: #333;
        }

        /* ...å…¶ä»–æ ·å¼ä¿æŒä¸å˜... */
		.container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* æ ‡é¢˜æ ·å¼ */
        .page-header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #07c160, #059c4a);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        /* å¡ç‰‡é€šç”¨æ ·å¼ */
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-3px);
        }

        /* è½¦å‹é€‰æ‹© */
        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .car-card {
            border: 2px solid #e9ecef;
            cursor: pointer;
            position: relative;
        }

        .car-card.active {
            border-color: #07c160;
            background: #f0fff4;
        }

        .badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #07c160;
            color: white;
            padding: 4px 8px;
            border-radius: 5px;
            font-size: 12px;
        }

        /* è¡¨å•æ ·å¼ */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            border-color: #07c160;
            outline: none;
        }

		 /* å‡ºå‘åœ°æ¨¡å— */
        .location-group {
            margin: 15px 0;
        }
        .location-note {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
		
        /* ä»·æ ¼æ˜¾ç¤º */
        .price-display {
            font-size: 18px;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }

        

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .car-grid {
                grid-template-columns: 1fr;
            }
        }
   
	 .dynamic-price::before {
            content: "Â¥";
            font-size: 0.8em;
            margin-right: 2px;
        }
        .price-tag {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

   /* æ–°å¢æ¥é€æœºä»·æ ¼æç¤ºæ ·å¼ */
        .shuttle-notice {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 8px;
            padding: 8px;
            background: #f8d7da;
            border-radius: 6px;
            display: none;
        }

       /* æ–°å¢æ ·å¼ */
.contact-info {
    padding: 10px !important;
    min-width: 280px;
}
.contact-line {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}
.vr {
    width: 1px;
    height: 20px;
    background: #ddd;
    margin: 0 10px;
}

@media (max-width: 480px) {
    .contact-line {
        gap: 8px;
    }
    .vr {
        display: none;
    }
} 
	
	</style>
	
	<!-- ä½¿ç”¨LeanCloudå®˜æ–¹SDK -->
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.13.2/dist/av-min.js"></script>
</head>
	
<body>
   
	 <!-- æ–°å¢é¡¶éƒ¨ä¿¡æ¯æ  -->
    <div class="top-info-bar">
    <div class="info-group">
      <div class="info-card contact-info">
            <div class="contact-line">
                <img src="./images/wechat-qrcode.jpg" width="50">
                <span>å¾®ä¿¡å®¢æœ</span>
                <div class="vr"></div>
                ğŸ“ <a href="tel:177-5050-6915" style="color:#07c160">177-5050-6915</a>
            </div>
        </div>
        <div class="info-card gift-notice">
          <p> ğŸ ä¸‹å•å³é€é²Ÿæµ¦ç°ªèŠ±éé—ä¼´æ‰‹ç¤¼</p>
          <p>ï¼ˆä»·å€¼Â¥68ï¼Œæ¯æ—¥é™é‡10ä»½ï¼‰ </p>
      </div>
    </div>
</div>
	
	<div class="container">
        <header class="page-header">
            <h1>ğŸš— æ³‰å·åŒ…è½¦/æ‹¼è½¦ä¸€æ—¥æ¸¸</h1>
            <p>æ™ºèƒ½æ¨è | è‡ªç”±ç»„åˆ | å®æ—¶è®¡ä»·</p>
        </header>

		
        <!-- è·¯çº¿é€‰æ‹© -->
        <div class="card">
            <h2>1. é€‰æ‹©æ¸¸ç©è·¯çº¿</h2>
            <select id="routeSelect" class="form-control" onchange="updateAllPrices()">
                <option value="">è¯·é€‰æ‹©æ¸¸ç©è·¯çº¿</option>
                <option value="classic1">ç»å…¸è·¯çº¿ä¸€ï¼ˆæ™‹æ±Ÿæ¢§æ—ä¼ ç»Ÿæ‘è½+æ°¸å®å¤é•‡+æ´›ä¼½å¯º+é»„é‡‘æµ·å²¸+èŸ³åŸ”æ‘ï¼‰</option>
                <option value="classic2">ç»å…¸è·¯çº¿äºŒï¼ˆæ™‹æ±Ÿæ¢§æ—ä¼ ç»Ÿæ‘è½+æ´›ä¼½å¯º+é»„é‡‘æµ·å²¸+å°å¨æµ·+å…­èƒœå¡”ï¼‰</option>
                <option value="classic3">ç»å…¸è·¯çº¿ä¸‰ï¼ˆå´‡æ­¦å¤åŸé£æ™¯åŒº+æƒ å¥³é£æƒ…å›­+æ´›é˜³æ¡¥+é£è½¦å²›+è¥¿æ²™æ¹¾ï¼‰</option>
                <option value="culture">æ–‡åŒ–è·¯çº¿ï¼ˆå¼€å…ƒå¯º+å…³å¸åº™+æ³‰å·å°‘æ—å¯º+æ³‰å·åšç‰©é¦†+é—½å°ç¼˜åšç‰©é¦†ï¼‰</option>
                <option value="custom">è‡ªå®šä¹‰è·¯çº¿ï¼ˆå®¢æœæ²Ÿé€šï¼‰</option>
				<option value="airport">æ¥é€æœº/ç«™æœåŠ¡ï¼ˆæ³‰å·ç«™åŸºç¡€ä»·80å…ƒï¼‰</option>
            </select>
        
			<div class="shuttle-notice" id="shuttleNotice">
                å…¶ä»–ç«™ç‚¹è¯·å’¨è¯¢å®¢æœï¼Œæˆ‘ä»¬å°†æ ¹æ®è·ç¦»åˆç†æŠ¥ä»·
            </div>
			
            <div class="location-group">
                <label>å‡ºå‘åœ°</label>
                <input type="text" id="departure" placeholder="è¯·è¾“å…¥è¯¦ç»†å‡ºå‘åœ°å€" required>
                <div class="location-note">ï¼ˆä¾‹ï¼šæ³‰å·é…’åº—/æ³‰å·ç«™å—å¹¿åœºç­‰ï¼‰</div>
            </div>
        </div>

        <!-- å¥—é¤é€‰æ‹© -->
        <div class="card">
            <h2>2. é€‰æ‹©å‡ºè¡Œæ–¹å¼</h2>
            <div class="car-grid">
                <!-- åŒ…è½¦å¥—é¤ -->
                <div class="car-card" data-type="private" 
                     data-price='{"classic1":400,"classic2":420,"classic3":450,"culture":380,"custom":500}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>ç»æµ5åº§è½¿è½¦</h3>
                    <p>ä¸€èˆ¬è®²è§£|é€‚åˆ2-4äººå°å›¢ä½“</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":450,"classic2":470,"classic3":550,"culture":430,"custom":600}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>èˆ’é€‚5åº§è½¿è½¦ï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼|é€‚åˆ2-4äººå°å›¢ä½“</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":650,"classic2":670,"classic3":750,"culture":600,"custom":700}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>å•†åŠ¡7åº§MPV</h3>
                    <p>ä¸€èˆ¬è®²è§£| å®¶åº­å‡ºæ¸¸é¦–é€‰</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":700,"classic2":730,"classic3":800,"culture":650,"custom":800}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>å•†åŠ¡7åº§MPVï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼| å®¶åº­å‡ºæ¸¸é¦–é€‰</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <!-- æ‹¼è½¦å¥—é¤ -->
                <div class="car-card" data-type="shared">
                    <div class="badge" style="background:#3498db">æ‹¼è½¦</div>
                    <h3>ç»æµæ‹¼è½¦å¥—é¤</h3>
                    <div class="price-display">Â¥<span id="sharedPrice">-</span>/äºº</div>
                    <div class="price-detail" id="priceDetail"></div>
                    <div class="form-group">
                        <label>å‡ºè¡Œäººæ•°</label>
                        <select id="sharedCount" onchange="updateSharedPrice()">
                            <option value="1">1äºº</option>
                            <option value="2">2äºº</option>
                            <option value="3">3äºº</option>
                            <option value="4">4äºº</option>
                        </select>
                    </div>
                </div>     
            
			<!-- æ–°å¢æ¥é€æœºä¸“ç”¨è½¦å‹ -->
                <div class="car-card" data-type="airport" 
                     data-price='{"airport":80}'>
                    <div class="badge" style="background:#ff7675">æ¥é€æœº</div>
                    <h3>ä¸“è½¦æ¥é€æœåŠ¡</h3>
                    <p>24å°æ—¶æœåŠ¡|å‡†æ—¶é€è¾¾|è¡ŒæååŠ©</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">æ³‰å·ç«™åŸºç¡€ä»·</div>
                </div>
			
			</div>
        </div>

        <!-- é¢„è®¢è¡¨å• -->
        <form id="bookingForm" class="card">
            <h2>3. å¡«å†™é¢„è®¢ä¿¡æ¯</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>å‡ºå‘æ—¥æœŸ</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label>å‡ºè¡Œäººæ•°</label>
                    <input type="number"  id="people" min="1" max="8" required>
                </div>
                <div class="form-group">
                    <label>è”ç³»äºº</label>
                    <input type="text" id="contact" placeholder="æ‚¨çš„å§“å" required>
                </div>
                <div class="form-group">
                    <label>è”ç³»ç”µè¯</label>
                    <input type="tel" id="phone" placeholder="æ‰‹æœºå·ç " required>
                </div>
            </div>
            <button type="submit" style="background:#07c160; color:white; padding:15px; width:100%; border:none; border-radius:8px; font-size:16px">
                ğŸš– ç«‹å³é¢„è®¢
            </button>
        </form>
    </div>

   

	
	
	
    <script>
        AV.init({
  appId: "srjSR1AScMqVmTlihhqDUycX-MdYXbMMI",
  appKey: "5Lq7VvdaCT8Y5jiNA4h1B4kn",
  serverURL: "https://srjsr1as.api.lncldglobal.com"
});
		
		// åˆå§‹åŒ–æ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
        updateAllPrices();
        // ç»‘å®šè½¦å‹å¡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.car-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.car-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
            });
        });
    });
		
        // ç»Ÿä¸€æ›´æ–°æ‰€æœ‰ä»·æ ¼
        function updateAllPrices() {
            updatePrivatePrices();
            updateSharedPrice();
        }

        // æ›´æ–°åçš„ç»Ÿä¸€å‡½æ•°
function updatePrivatePrices() {
    const route = document.getElementById('routeSelect').value;
    document.getElementById('shuttleNotice').style.display = 
        route === 'airport' ? 'block' : 'none';

    document.querySelectorAll('[data-type="private"], [data-type="airport"]').forEach(card => {
        try {
            const prices = JSON.parse(card.dataset.price);
            const priceDisplay = card.querySelector('.dynamic-price');
            
            // é€šè¿‡CSSä¼ªå…ƒç´ æ˜¾ç¤ºÂ¥ç¬¦å·
            priceDisplay.textContent = route && prices[route] ? 
                prices[route].toString() : 
                (route === "custom" ? "è”ç³»å®¢æœ" : "-");
            
        } catch (e) {
            console.error('ä»·æ ¼è§£æé”™è¯¯:', e);
        }
    });
}
        
		
        // æ‹¼è½¦ä»·æ ¼é…ç½®
        const routePrices = {
            classic1: { base: 120 },
            classic2: { base: 120 },
            classic3: { base: 150 },
            culture:  { base: 100 },
            custom:   { base: 150 }
        };

        // æ›´æ–°æ‹¼è½¦ä»·æ ¼
        function updateSharedPrice() {
            const route = document.getElementById('routeSelect').value;
            const count = parseInt(document.getElementById('sharedCount').value);
            
            if(!route || !routePrices[route]) {
                document.getElementById('sharedPrice').textContent = '-';
                return;
            }

            const basePrice = routePrices[route].base;
            let discount = count >= 2 ? (count-1)*5 : 0;
            if(count === 4) discount = 20;
            
            const finalPrice = basePrice - discount;
            
            document.getElementById('sharedPrice').textContent = finalPrice;
            document.getElementById('priceDetail').innerHTML = 
                `åŸºç¡€ä»·ï¼šÂ¥${basePrice}/äºº<br>
                åŒè¡Œä¼˜æƒ ï¼š-Â¥${discount}`;
        }

        // è¡¨å•æäº¤
       

		
        // å¢å¼ºå‹è¡¨å•æäº¤
        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
        e.preventDefault();
    
    let isValid = true;
			// æ–°å¢è½¦å‹éªŒè¯
    const selectedCar = document.querySelector('.car-card.active');
    if (!selectedCar) {
        alert('è¯·å…ˆé€‰æ‹©å‡ºè¡Œæ–¹å¼');
        return;
    }

    // å¢å¼ºéªŒè¯é€»è¾‘
    const requiredFields = [
        {id: 'routeSelect', min: 1, type: 'select'}, // è·¯çº¿é€‰æ‹©éªŒè¯
        {id: 'departure', min: 3},
        {id: 'date'},
        {id: 'people'},
        {id: 'contact', min: 2},
        {id: 'phone', min: 11}
    ];

	// ä¿®æ”¹ç”µè¯éªŒè¯é€»è¾‘
    const phoneValue = document.getElementById('phone').value.replace(/[^0-9]/g, '');
if (phoneValue.length < 11) {
    document.getElementById('phone').style.borderColor = '#dc3545';
    isValid = false;
} else {
    document.getElementById('phone').style.borderColor = '#ddd';
}
			
    
    requiredFields.forEach(field => {
        const el = document.getElementById(field.id);
        let value = el.value;
        
        // å¤„ç†selectç±»å‹
        if (field.type === 'select' && value === "") {
            isValid = false;
            el.style.borderColor = '#dc3545';
        } 
        // å¤„ç†å…¶ä»–è¾“å…¥
        else if (!value || (field.min && value.length < field.min)) {
            isValid = false;
            el.style.borderColor = '#dc3545';
        } else {
            el.style.borderColor = '#ddd';
        }
    });

    if (!isValid) {
        alert('è¯·æ£€æŸ¥çº¢è‰²æ ‡è®°çš„å¿…å¡«é¡¹');
        return;
    }

    // å¤„ç†ä»·æ ¼æ•°æ®
    const priceText = selectedCar.querySelector('.dynamic-price').innerText;
    const priceValue = parseFloat(priceText.replace('Â¥', '')) || 0;

			 // è·å–è¡¨å•æ•°æ®
        const formData = {
        route: document.getElementById('routeSelect').value,
        departure: document.getElementById('departure').value,
        date: document.getElementById('date').value,
        people: parseInt(document.getElementById('people').value),
        contact: document.getElementById('contact').value,
        phone: document.getElementById('phone').value,
        carType: document.querySelector('.car-card.active h3').innerText,
        price: parseFloat(document.querySelector('.car-card.active .dynamic-price').innerText.replace('Â¥', '')) || 0,
        status: "å¾…å¤„ç†",
        createdAt: new Date().toISOString()
    };

    // ä½¿ç”¨LeanCloudçš„AV.Object
        const Booking = AV.Object.extend('Booking'); // æ›¿æ¢Parse.Objectä¸ºAV.Object
        const booking = new Booking();

    // è®¾ç½®å¯¹è±¡å±æ€§
    booking.set("route", document.getElementById('routeSelect').value);
        booking.set("departure", document.getElementById('departure').value);
        booking.set("date", document.getElementById('date').value);
        booking.set("people", parseInt(document.getElementById('people').value));
        booking.set("contact", document.getElementById('contact').value);
        booking.set("phone", document.getElementById('phone').value);
        booking.set("carType", document.querySelector('.car-card.active h3').innerText);
        booking.set("price", parseFloat(document.querySelector('.car-card.active .dynamic-price').innerText) || 0);
        booking.set("status", "å¾…å¤„ç†");

    // ä¿å­˜åˆ° Parse
    try {
            await booking.save(); // LeanCloudçš„ä¿å­˜æ–¹æ³•ä¸Parseå…¼å®¹
            alert('æäº¤æˆåŠŸï¼');
            document.getElementById('bookingForm').reset(); // æ¸…ç©ºè¡¨å•
        } catch (error) {
            console.error('Error:', error);
            alert('æäº¤å¤±è´¥ï¼Œè¯·ç›´æ¥è”ç³»å®¢æœ');
        }
    });
    </script>
    
</body>
</html>