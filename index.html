<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³‰å·åŒ…è½¦/æ‹¼è½¦ä¸€æ—¥æ¸¸ | æ™ºèƒ½é¢„çº¦ç³»ç»Ÿ</title>
    <!-- æ·»åŠ æ”¾å¤§é•œå®¹å™¨ -->
<div class="zoom-overlay" id="zoomOverlay">
    <img src="./images/wechat-qrcode.jpg" class="zoomed-image" id="zoomedImg">
    <span class="close-btn" onclick="document.getElementById('zoomOverlay').style.display='none'">&times;</span>
</div>
	<style>
        .page-header h1 {
    font-size: clamp(1.5rem, 6vw, 2.2rem); /* å“åº”å¼å­—ä½“å¤§å° */
    white-space: nowrap; /* å¼ºåˆ¶ä¸æ¢è¡Œ */
    overflow: hidden; /* éšè—æº¢å‡ºå†…å®¹ */
    text-overflow: ellipsis; /* æº¢å‡ºæ—¶æ˜¾ç¤ºçœç•¥å· */
    padding: 0 15px; /* æ·»åŠ å†…è¾¹è· */
}
		
		/* åŸºç¡€æ ·å¼ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #f8f9fa;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* é¡¶éƒ¨ä¿¡æ¯æ  */
        .top-info-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: white;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .info-group {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        /* é¡µé¢æ ‡é¢˜ */
        .page-header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #07c160, #059c4a);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        /* å¡ç‰‡é€šç”¨æ ·å¼ */
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-3px);
        }

        /* è·¯çº¿é€‰æ‹©æ¨¡æ€æ¡† */
        .route-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            padding: 15px;
        }

        .route-container {
            background: white;
            max-width: 600px;
            margin: 20px auto;
            border-radius: 15px;
            padding: 20px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .route-option {
            display: flex;
            gap: 20px;
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            align-items: center;
        }

        .main-thumbnail {
            width: 200px;
            height: 120px;
            border-radius: 10px;
            object-fit: cover;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .main-thumbnail:hover {
            transform: scale(1.03);
        }

        /* å›¾é›†ç”»å»Š */
        .gallery-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.97);
            z-index: 3000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .gallery-image {
    /* ä¿®æ”¹å‰ï¼šä½œç”¨äºimg */
    /* max-width: 95%; */
    /* max-height: 80vh; */

    /* ä¿®æ”¹åï¼šä½œç”¨äºdivå®¹å™¨ */
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* æ–°å¢å­å…ƒç´ æ ·å¼ */
.gallery-image img,
.gallery-image video {
    max-width: 95%;
    max-height: 80vh;
    border-radius: 15px;
    object-fit: contain;
}

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        /* è½¦å‹é€‰æ‹© */
        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .car-card {
            border: 2px solid #e9ecef;
            cursor: pointer;
            position: relative;
            padding: 15px;
            border-radius: 10px;
        }

        .car-card.active {
            border-color: #07c160;
            background: #f0fff4;
        }

        .badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #07c160;
            color: white;
            padding: 4px 8px;
            border-radius: 5px;
            font-size: 12px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            .car-grid {
                grid-template-columns: 1fr;
            }
            .route-option {
                flex-direction: column;
            }
            .main-thumbnail {
                width: 100%;
                height: 150px;
            }			
        }
		/* æ–°å¢æ•°æ®åº“é”™è¯¯æç¤ºæ ·å¼ï¼ˆåˆå¹¶çš„ï¼‰ */
        .error-message {
            color: #dc3545;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }
        /* è¡¨å•æ ·å¼ */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus {
            border-color: #07c160;
            outline: none;
        }
		 /* å‡ºå‘åœ°æ¨¡å— */
        .location-group {
            margin: 15px 0;
        }
        .location-note {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }		
        /* ä»·æ ¼æ˜¾ç¤º */
        .price-display {
            font-size: 18px;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }   
	 .dynamic-price::before {
            content: "Â¥";
            font-size: 0.8em;
            margin-right: 2px;
        }
        .price-tag {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

   /* æ–°å¢æ¥é€æœºä»·æ ¼æç¤ºæ ·å¼ */
        .shuttle-notice {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 8px;
            padding: 8px;
            background: #f8d7da;
            border-radius: 6px;
            display: none;
        }
       /* æ–°å¢æ ·å¼ */
.contact-info {
    padding: 10px !important;
    min-width: 280px;
}
.contact-line {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}
.vr {
    width: 1px;
    height: 20px;
    background: #ddd;
    margin: 0 10px;
}
@media (max-width: 480px) {
    .contact-line {
        gap: 8px;
    }
    .vr {
        display: none;
    }
}			
	/* æ–°å¢æ”¾å¤§é•œæ ·å¼ */
    .zoom-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        z-index: 3000;
        display: none;
        justify-content: center;
        align-items: center;
    }
    .zoomed-image {
        max-width: 80%;
        max-height: 80%;
        border-radius: 10px;
        border: 2px solid #fff;
    }
    .zoom-overlay .close-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        color: white;
        font-size: 30px;
        cursor: pointer;
    }
    .zoomed-image.active {
        transform: scale(1.05);
    }
.route-info {
    flex: 1;
}
 /* æ–°å¢ï¼šå›¾é›†å±…ä¸­æ ·å¼ */
        .gallery-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .gallery-slide {
            text-align: center;
        }
		/* ä¿®å¤å¯¼èˆªæŒ‰é’®ä½ç½® */
        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
        }

.prev-btn { left: 20px; }
.next-btn { right: 20px; }
		
		@media (max-width: 480px) {
    .route-option {
        flex-direction: column;
    }
    .main-thumbnail {
        width: 100%;
        height: 150px;
    }
    .nav-button {
        font-size: 30px;
        padding: 10px;
    }
			/* å°å±å¹•ä¸‹è¿›ä¸€æ­¥è°ƒæ•´æ ‡é¢˜ */
            .page-header h1 {
                font-size: clamp(1.4rem, 5.5vw, 1.8rem);
                padding: 0 10px;
            }
}
    /* æ–°å¢è·¯çº¿åç§°æ ·å¼ */
#selectedRouteName {
    padding: 12px;
    background: #f0fff4;
    border-radius: 8px;
    border: 2px solid #07c160;
}
	</style>
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.13.2/dist/av-min.js"></script>
<script>
  // WebP å…¼å®¹æ€§æ£€æµ‹
  (function() {
    const images = document.querySelectorAll('img[data-webp]');
    images.forEach(img => {
      const webpSrc = img.getAttribute('data-webp');
      const jpgSrc = img.getAttribute('src');
      const testWebP = new Image();
      testWebP.onload = function() {
        img.src = webpSrc; // æ”¯æŒåˆ™æ›¿æ¢ä¸º WebP
      };
      testWebP.onerror = function() {
        img.src = jpgSrc; // ä¸æ”¯æŒåˆ™ä¿æŒ JPG
      };
      testWebP.src = 'data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==';
    });
  })();
</script>
	</head>
<body>
    <div class="top-info-bar">
        <div class="info-group">
            <div class="info-card contact-info">
                <div class="contact-line">
                    <img src="./images/wechat-qrcode.jpg" width="50">
                    <span>å¾®ä¿¡å®¢æœ</span>
                    <div class="vr"></div>
                    ğŸ“ <a href="tel:195-3522-5743" style="color:#07c160">195-3522-5743</a>
                </div>
            </div> 
		<div class="info-card">
            <a href="https://flbook.com.cn/c/PnU2pG93gu" 
               target="_blank"
               style="display:block; text-align:center; padding:10px; background:#3498db; color:white; border-radius:8px; text-decoration:none">
                ğŸ“– æ³‰å·æ—…æ¸¸æŒ‡å—
            </a>
        </div>
        </div>
    </div>

    <div class="container">
        <header class="page-header">
            <h1>ğŸš—æ³‰å·åŒ…è½¦/æ‹¼è½¦ä¸€æ—¥æ¸¸</h1>
            <p>æ™ºèƒ½æ¨è | è‡ªç”±ç»„åˆ | å®æ—¶è®¡ä»·</p>
        </header>

        <!-- è·¯çº¿é€‰æ‹© -->
        <div class="card">
            <h2>1. é€‰æ‹©æ¸¸ç©è·¯çº¿</h2>
          <button onclick="showRouteModal()" class="route-btn" style="width:100%;padding:15px;background:#07c160;color:white;border:none;border-radius:10px;font-size:16px">
                ğŸ—ºï¸ ç‚¹å‡»æŸ¥çœ‹æ‰€æœ‰è·¯çº¿
            </button>
            <!-- ä¿®æ”¹é¢„è§ˆåŒºåŸŸ -->
<div id="selectedRoutePreview" style="margin-top:15px;display:none">
    <h3 style="color:#07c160; margin-bottom:10px" id="selectedRouteName"></h3>
    <p id="selectedRouteDetail" style="color:#666"></p>
</div>
        </div>

        <!-- è·¯çº¿é€‰æ‹©æ¨¡æ€æ¡† -->
<div class="route-modal" id="routeModal">
    <div class="route-container">
		<!-- æ–°å¢å…³é—­æŒ‰é’® -->
        <span class="close-btn" onclick="closeRouteModal()" style="
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #666;
        ">&times;</span>
        <h2 style="text-align:center;margin-bottom:20px">é€‰æ‹©æ¸¸ç©è·¯çº¿</h2>
        
        <!-- ç»å…¸è·¯çº¿ä¸€ -->
        <div class="route-option" onclick="selectRoute('classic1')" data-route="classic1">
            <picture>
    <source srcset="images/classic1-main.webp" type="image/webp">
    <img src="../images/classic1-main.jpg" 
         class="main-thumbnail" 
         onclick="event.stopPropagation();showGallery('classic1')"
         alt="ç»å…¸è·¯çº¿ä¸€">
  </picture>
            <div class="route-info">
                <h3>ç»å…¸è·¯çº¿ä¸€</h3>
                <p>ğŸ“ æ™‹æ±Ÿæ¢§æ—ä¼ ç»Ÿæ‘è½ â” æ°¸å®å¤é•‡ â” æ´›ä¼½å¯º â” é»„é‡‘æµ·å²¸ â”å°å¨æµ· â”èŸ³åŸ”æ‘</p>
                <div style="color:#666;margin-top:8px;font-size:14px">
                    <span>ğŸï¸ 6å¤§æ™¯ç‚¹ | ğŸ•’ 9å°æ—¶è¡Œç¨‹ | ğŸ“¸ æœ€ä½³æ‹æ‘„è·¯çº¿ | Â¥100èµ·</span>
                </div>
            </div>
        </div>
                <!-- ç»å…¸è·¯çº¿äºŒ -->
        <div class="route-option" onclick="selectRoute('classic2')" data-route="classic2">
            <picture>
    <source srcset="images/classic2-main.webp" type="image/webp">
    <img src="../images/classic2-main.jpg" 
         class="main-thumbnail" 
         onclick="event.stopPropagation();showGallery('classic2')"
         alt="ç»å…¸è·¯çº¿äºŒ">
  </picture>
            <div class="route-info">
                <h3>ç»å…¸è·¯çº¿äºŒ</h3>
                <p>ğŸ“ æ™‹æ±Ÿæ¢§æ—ä¼ ç»Ÿæ‘è½ â” æ´›ä¼½å¯º â” é»„é‡‘æµ·å²¸ â” å°å¨æµ· â” å…­èƒœå¡” â” èŸ³åŸ”æ‘</p>
                <div style="color:#666;margin-top:8px;font-size:14px">
                    <span>ğŸï¸ 6å¤§æ™¯ç‚¹ | ğŸ•’ 9å°æ—¶è¡Œç¨‹ | ğŸ“¸ æœ€ä½³è§‚æµ·æ‰“å¡ | Â¥100èµ·</span>
                </div>
            </div>
        </div>
                <!-- ç»å…¸è·¯çº¿ä¸‰ -->
        <div class="route-option" onclick="selectRoute('classic3')" data-route="classic3">
            <picture>
    <source srcset="images/classic3-main.webp" type="image/webp">
    <img src="../images/classic3-main.jpg" 
         class="main-thumbnail" 
         onclick="event.stopPropagation();showGallery('classic3')"
         alt="ç»å…¸è·¯çº¿ä¸‰">
  </picture>
            <div class="route-info">
                <h3>ç»å…¸è·¯çº¿ä¸‰</h3>
                <p>ğŸ“ æ´›é˜³æ¡¥ â” å´‡æ­¦å¤åŸé£æ™¯åŒº â” æƒ å¥³é£æƒ…å›­ â” é£è½¦å²› â” è¥¿æ²™æ¹¾ â” æµ®çŸ³éšåœ°</p>
                <div style="color:#666;margin-top:8px;font-size:14px">
                    <span>ğŸï¸ 6å¤§æ™¯ç‚¹ | ğŸ•’ 9å°æ—¶è¡Œç¨‹ | ğŸ“¸ æœ€ä½³åèƒœå¤è¿¹ | Â¥130èµ·</span>
                </div>
            </div>
        </div>
                <!-- æ–‡åŒ–è·¯çº¿ -->
        <div class="route-option" onclick="selectRoute('culture')" data-route="culture">
            <picture>
    <source srcset="images/culture-main.webp" type="image/webp">
    <img src="../images/culture-main.jpg" 
         class="main-thumbnail" 
         onclick="event.stopPropagation();showGallery('culture')"
         alt="æ–‡åŒ–è·¯çº¿">
  </picture>
            <div class="route-info">
                <h3>æ–‡åŒ–è·¯çº¿</h3>
                <p>ğŸ“ å¼€å…ƒå¯º â” å…³å¸åº™ â” æ³‰å·å°‘æ—å¯º â” æ³‰å·åšç‰©é¦† â” é—½å°ç¼˜åšç‰©é¦† â” æ´›é˜³æ¡¥</p>
                <div style="color:#666;margin-top:8px;font-size:14px">
                    <span>ğŸï¸ 6å¤§æ™¯ç‚¹ | ğŸ•’ 9å°æ—¶è¡Œç¨‹ | ğŸ“¸ æœ€ä½³é—½å—æ–‡åŒ– | Â¥80èµ·</span>
                </div>
            </div>
        </div>
                <!-- è‡ªå®šä¹‰è·¯çº¿ -->
        <div class="route-option" onclick="selectRoute('custom')" data-route="custom">
            <picture>
    <source srcset="images/custom-main.webp" type="image/webp">
    <img src="../images/custom-main.jpg" 
         class="main-thumbnail" 
         onclick="event.stopPropagation();showGallery('custom')"
         alt="è‡ªå®šä¹‰è·¯çº¿">
  </picture>
            <div class="route-info">
                <h3>è‡ªå®šä¹‰è·¯çº¿ï¼ˆå®¢æœæ²Ÿé€šï¼‰</h3> 
				<p>ğŸ“ ç§äººå®šåˆ¶ â” è¡Œç¨‹å¯è°ƒ â” æ·±åº¦æ¸¸ç© â” ç‹¬ç«‹æˆè¡Œ â” ä¸“å±æœåŠ¡</p>
                <div style="color:#666;margin-top:8px;font-size:14px">
                    <span>ğŸï¸ æ™¯ç‚¹å®šåˆ¶ | ğŸ•’ 9å°æ—¶è¡Œç¨‹ | ğŸ“¸ ç•…ç©åƒå¹´åˆºæ¡ | Â¥100èµ·</span>
                </div>
            </div>
        </div>
				<!-- æ¥é€æœºæœåŠ¡ -->
        <div class="route-option" onclick="selectRoute('airport')" data-route="airport">
            <picture>
    <source srcset="images/airport-main.webp" type="image/webp">
    <img src="../images/airport-main.jpg" 
         class="main-thumbnail" 
         onclick="event.stopPropagation();showGallery('airport')"
         alt="æ¥é€æœº/ç«™æœåŠ¡">
  </picture>
            <div class="route-info">
                <h3>æ¥é€æœº/ç«™æœåŠ¡ï¼ˆæ³‰å·ç«™ï¼š80å…ƒï¼‰</h3>
				<p>ğŸ“ å‡ºè¡Œæ— å¿§ â” å¹²å‡€èˆ’é€‚ â” å‡†æ—¶åˆ°è¾¾ </p>
                <div style="color:#666;margin-top:8px;font-size:14px">
                    <span>ğŸï¸ å®‰å¿ƒä¾¿æ· | ğŸ•’ ä¸Šé—¨æ¥é€ | ğŸ“¸ å…¨ç¨‹æ— å¿§ | Â¥80èµ·</span>
                </div>
            </div>
        </div>
    </div>
</div>
		
		<!-- æ–°å¢éšè—çš„è·¯çº¿é€‰æ‹©å™¨ï¼ˆç”¨äºå­˜å‚¨é€‰æ‹©å€¼ï¼‰ -->
<select id="routeSelect" style="display:none">
    <option value="">è¯·é€‰æ‹©è·¯çº¿</option>
    <option value="classic1">ç»å…¸è·¯çº¿ä¸€ï¼ˆæ™‹æ±Ÿæ¢§æ—ä¼ ç»Ÿæ‘è½+æ°¸å®å¤é•‡+æ´›ä¼½å¯º+é»„é‡‘æµ·å²¸+å°å¨æµ·+èŸ³åŸ”æ‘ï¼‰</option>
    <option value="classic2">ç»å…¸è·¯çº¿äºŒï¼ˆæ™‹æ±Ÿæ¢§æ—ä¼ ç»Ÿæ‘è½+æ´›ä¼½å¯º+é»„é‡‘æµ·å²¸+å°å¨æµ·+å…­èƒœå¡”+èŸ³åŸ”æ‘ï¼‰</option>
    <option value="classic3">ç»å…¸è·¯çº¿ä¸‰ï¼ˆå´‡æ­¦å¤åŸé£æ™¯åŒº+æƒ å¥³é£æƒ…å›­+æ´›é˜³æ¡¥+é£è½¦å²›+è¥¿æ²™æ¹¾+æµ®çŸ³éšåœ°ï¼‰</option>
    <option value="culture">æ–‡åŒ–è·¯çº¿ï¼ˆå¼€å…ƒå¯º+å…³å¸åº™+æ³‰å·å°‘æ—å¯º+æ³‰å·åšç‰©é¦†+é—½å°ç¼˜åšç‰©é¦†+æ´›é˜³æ¡¥ï¼‰</option>
    <option value="custom">è‡ªå®šä¹‰è·¯çº¿ï¼ˆå®¢æœæ²Ÿé€šï¼‰</option>
    <option value="airport">æ¥é€æœºæœåŠ¡ï¼ˆæ³‰å·ç«™åŸºç¡€ä»·80å…ƒï¼‰</option>
</select>
		
        <!-- å›¾é›†ç”»å»Š -->
<div class="gallery-overlay" id="galleryOverlay">
    <div class="gallery-container">
        <span class="close-btn" onclick="closeGallery()">&times;</span>
        <div class="nav-button prev-btn" onclick="changeImage(-1)">â®</div>
        <div class="gallery-slide">
            <div class="gallery-image" id="galleryImage"></div>
        </div>
        <div class="nav-button next-btn" onclick="changeImage(1)">â¯</div>
    </div>
</div>
			<div class="shuttle-notice" id="shuttleNotice">
                å…¶ä»–ç«™ç‚¹è¯·å’¨è¯¢å®¢æœï¼Œæˆ‘ä»¬å°†æ ¹æ®è·ç¦»åˆç†æŠ¥ä»·
            </div>
			
            <div class="card">
            <h2>2. é€‰æ‹©å‡ºå‘åœ°</h2>
                <input type="text" id="departure" placeholder="è¯·è¾“å…¥è¯¦ç»†å‡ºå‘åœ°å€" required>
                <div class="location-note">ï¼ˆä¾‹ï¼šæ³‰å·é…’åº—/æ³‰å·ç«™å—å¹¿åœºç­‰ï¼‰</div>
      </div>
        

      <!-- å¥—é¤é€‰æ‹© -->
        <div class="card">
            <h2>3. é€‰æ‹©å‡ºè¡Œæ–¹å¼</h2>
            <div class="car-grid">
                <!-- åŒ…è½¦å¥—é¤ -->
                <div class="car-card" data-type="private" 
                     data-price='{"classic1":400,"classic2":420,"classic3":450,"culture":380,"custom":400}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>ç»æµ5åº§è½¿è½¦</h3>
                    <p>ä¸€èˆ¬è®²è§£|é€‚åˆ2-4äººå°å›¢</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":450,"classic2":470,"classic3":550,"culture":430,"custom":450}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>èˆ’é€‚5åº§è½¿è½¦ï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼|é€‚åˆ2-4äººå°å›¢</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>
				
                 <div class="car-card" data-type="private" 
                     data-price='{"classic1":450,"classic2":470,"classic3":500,"culture":400,"custom":450}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>ç»æµ5åº§SUV</h3>
                    <p>ä¸€èˆ¬è®²è§£|é€‚åˆ2-4äººå°å›¢</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":500,"classic2":520,"classic3":600,"culture":450,"custom":500}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>èˆ’é€‚5åº§SUVï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼|é€‚åˆ2-4äººå°å›¢</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>
				
                <div class="car-card" data-type="private" 
                     data-price='{"classic1":600,"classic2":620,"classic3":650,"culture":550,"custom":600}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>å•†åŠ¡7åº§MPV</h3>
                    <p>ä¸€èˆ¬è®²è§£| å®¶åº­å‡ºæ¸¸é¦–é€‰</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":650,"classic2":650,"classic3":700,"culture":600,"custom":650}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>å•†åŠ¡7åº§MPVï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼| å®¶åº­å‡ºæ¸¸é¦–é€‰</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>
				
                 <div class="car-card" data-type="private" 
                     data-price='{"classic1":800,"classic2":850,"classic3":900,"culture":700,"custom":800}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>å¥”é©°9åº§å•†åŠ¡</h3>
                    <p>ä¸€èˆ¬è®²è§£| å®¶åº­è±ªåå‡ºæ¸¸</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":850,"classic2":850,"classic3":950,"culture":800,"custom":850}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>å¥”é©°9åº§å•†åŠ¡ï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼| å®¶åº­è±ªåå‡ºæ¸¸</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>
				
				<div class="car-card" data-type="private" 
                     data-price='{"classic1":950,"classic2":950,"classic3":1000,"culture":900,"custom":950}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>13åº§å°å·´</h3>
                    <p>ä¸€èˆ¬è®²è§£| å›¢é˜Ÿå‡ºæ¸¸é¦–é€‰</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>

                <div class="car-card" data-type="private" 
                     data-price='{"classic1":1000,"classic2":1000,"classic3":1100,"culture":1000,"custom":1000}'>
                    <div class="badge">åŒ…è½¦</div>
                    <h3>13åº§å°å·´ï¼ˆVIPå°Šäº«ï¼‰</h3>
                    <p>ç²¾è‡´è®²è§£|å¸æœº+å‘å¯¼| å›¢é˜Ÿå‡ºæ¸¸é¦–é€‰</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">ä»·æ ¼éšè·¯çº¿å˜åŒ–</div>
                </div>
				
                <!-- æ‹¼è½¦å¥—é¤ -->
                <div class="car-card" data-type="shared" onclick="this.classList.add('active')">
                    <div class="badge" style="background:#3498db">æ‹¼è½¦</div>
                    <h3>ç»æµæ‹¼è½¦å¥—é¤</h3>
                    <div class="price-display">Â¥<span id="sharedPrice">-</span>/äºº</div>
                    <div class="price-detail" id="priceDetail"></div>
                    <div class="form-group">
                        <label>å‡ºè¡Œäººæ•°</label>
                        <select id="sharedCount" onchange="updateSharedPrice()">
                            <option value="1">1äºº</option>
                            <option value="2">2äºº</option>
                            <option value="3">3äºº</option>
                            <option value="4">4äºº</option>
                        </select>
                    </div>
                </div>     
            
			<!-- æ–°å¢æ¥é€æœºä¸“ç”¨è½¦å‹ -->
                <div class="car-card" data-type="airport" 
                     data-price='{"airport":80}'>
                    <div class="badge" style="background:#ff7675">æ¥é€æœº</div>
                    <h3>ä¸“è½¦æ¥é€æœåŠ¡</h3>
                    <p>24å°æ—¶æœåŠ¡|å‡†æ—¶é€è¾¾|è¡ŒæååŠ©</p>
                    <div class="price-display dynamic-price">-</div>
                    <div class="price-tag">æ³‰å·ç«™åŸºç¡€ä»·</div>
                </div>		
            </div>
        </div>

        <!-- é¢„è®¢è¡¨å• -->
        <form id="bookingForm" class="card">
            <h2>4. å¡«å†™é¢„è®¢ä¿¡æ¯</h2>
             <div class="form-grid">
                <div class="form-group">
                    <label>å‡ºå‘æ—¥æœŸ</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label>å‡ºè¡Œäººæ•°</label>
                    <input type="number"  id="people" min="1" max="8" required>
                </div>
                <div class="form-group">
                    <label>è”ç³»äºº</label>
                    <input type="text" id="contact" placeholder="æ‚¨çš„å§“å" required>
                </div>
                <div class="form-group">
                    <label>è”ç³»ç”µè¯</label>
                    <input type="tel" id="phone" placeholder="æ‰‹æœºå·ç " required>
                </div>
            </div>
            <button type="submit" style="background:#07c160; color:white; padding:15px; width:100%; border:none; border-radius:8px; font-size:16px">
                ğŸš– ç«‹å³é¢„è®¢
            </button>
        </form>
    </div>

    <script>
        		
		// åˆå§‹åŒ–æ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
       AV.init({
  appId: "74Xir9Wxem42SP8G2lIJgWu4-gzGzoHsz",
  appKey: "CtqUN4TzeIg5zze4oZFzNpt4",
  serverURL: "https://74xir9wx.lc-cn-n1-shared.com"
});
		// ç»‘å®šè·¯çº¿é€‰é¡¹ç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
    document.getElementById('routeModal').addEventListener('click', function(e) {
        const routeOption = e.target.closest('.route-option');
        if (routeOption) {
            const routeId = routeOption.dataset.route; // ç¡®ä¿HTMLä¸­æœ‰data-routeå±æ€§
            selectRoute(routeId);
        }
    });
		// ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    document.getElementById('routeModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeRouteModal();
        }
    });
        // ç»‘å®šè½¦å‹å¡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.car-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.car-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
            });
        });
		// ç»‘å®šæ¨¡æ€æ¡†è·¯çº¿ç‚¹å‡»äº‹ä»¶
    document.querySelectorAll('.route-option').forEach(option => {
        option.addEventListener('click', function() {
            const routeId = this.dataset.route;
            selectRoute(routeId);
        });
    });
		// å¾®ä¿¡äºŒç»´ç æ”¾å¤§åŠŸèƒ½
    document.querySelector('.contact-line img').addEventListener('click', function() {
        const overlay = document.getElementById('zoomOverlay');
        const zoomedImg = document.getElementById('zoomedImg');
        overlay.style.display = 'flex';
        zoomedImg.src = this.src; // åŒæ­¥äºŒç»´ç å›¾ç‰‡
    });
            // ç¡®ä¿ä»·æ ¼åˆå§‹æ›´æ–°
            updateAllPrices();		
    });
		
		// è·¯çº¿äº¤äº’é€»è¾‘
        function showRouteModal() {
            document.getElementById('routeModal').style.display = 'block';
        }

        // ä¿®å¤æ¨¡æ€æ¡†å…³é—­å‡½æ•°
        function closeRouteModal() {
            document.getElementById('routeModal').style.display = 'none';
        }
        // ç»Ÿä¸€æ›´æ–°æ‰€æœ‰ä»·æ ¼
        function updateAllPrices() {
            updatePrivatePrices();
            updateSharedPrice();
        }

        // ä»·æ ¼æ›´æ–°å‡½æ•°ï¼ˆå¼ºåŒ–ç‰ˆï¼‰
function updatePrivatePrices() {
    const route = document.getElementById('routeSelect').value;
    
    // å¤„ç†æ¥é€æœºæç¤º
    document.getElementById('shuttleNotice').style.display = 
        route === 'airport' ? 'block' : 'none';

    // æ›´æ–°æ‰€æœ‰è½¦å‹ä»·æ ¼
    document.querySelectorAll('[data-type="private"], [data-type="airport"]').forEach(card => {
        const prices = JSON.parse(card.dataset.price);
        const priceDisplay = card.querySelector('.dynamic-price');
        const validRoute = route === 'airport' ? 'airport' : route;
        priceDisplay.textContent = prices[validRoute] || (route === "custom" ? "è”ç³»å®¢æœ" : "-");
    });
}
        
		
        // æ‹¼è½¦ä»·æ ¼é…ç½®
        const routePrices = {
            classic1: { base: 120 },
            classic2: { base: 120 },
            classic3: { base: 150 },
            culture:  { base: 100 },
            custom:   { base: 120 }
        };

        // æ›´æ–°æ‹¼è½¦ä»·æ ¼
        function updateSharedPrice() {
            const route = document.getElementById('routeSelect').value;
            const count = parseInt(document.getElementById('sharedCount').value);
            
            if(!route || !routePrices[route]) {
                document.getElementById('sharedPrice').textContent = '-';
                return;
            }

            const basePrice = routePrices[route].base;
            let discount = count >= 2 ? (count-1)*5 : 0;
            if(count === 4) discount = 20;
            
            const finalPrice = basePrice - discount;
            
            document.getElementById('sharedPrice').textContent = finalPrice;
            document.getElementById('priceDetail').innerHTML = 
                `åŸºç¡€ä»·ï¼šÂ¥${basePrice}/äºº<br>
                åŒè¡Œä¼˜æƒ ï¼š-Â¥${discount}`;
        }

       // å¾®ä¿¡äºŒç»´ç ç‚¹å‡»æ”¾å¤§åŠŸèƒ½
    document.querySelector('.contact-line img').addEventListener('click', function() {
        const overlay = document.getElementById('zoomOverlay');
        const zoomedImg = document.getElementById('zoomedImg');
        
        overlay.style.display = 'flex';
        zoomedImg.classList.add('active');
        
        // æ·»åŠ ç‚¹å‡»å…³é—­åŠŸèƒ½
        overlay.addEventListener('click', function(e) {
            if (e.target === overlay || e.target === zoomedImg) {
                overlay.style.display = 'none';
                zoomedImg.classList.remove('active');
            }
        });
        
        // æ‰‹æœºç«¯æ·»åŠ åŒå‡»æ”¾å¤§
        let lastTap = 0;
        zoomedImg.addEventListener('touchend', function(e) {
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTap;
            if (tapLength < 500 && tapLength > 0) {
                zoomedImg.classList.toggle('active');
                e.preventDefault();
            }
            lastTap = currentTime;
        });
    });

        // è·¯çº¿å›¾é›†é…ç½®ï¼ˆå¯æ··åˆå›¾ç‰‡å’Œè§†é¢‘ï¼‰
const routeGallery = {
    classic1: {
        main: 'classic1-main.webp',
        media: [
            {type: 'image', src: 'classic1-1.webp'},
            {type: 'image', src: 'classic1-2.webp'},
			{type: 'image', src: 'classic1-3.webp'},
			{type: 'image', src: 'classic1-4.webp'},
			{type: 'image', src: 'classic1-5.webp'},
            
        ]
    },
    // å…¶ä»–è·¯çº¿é…ç½®...
	classic2: {
        main: 'classic2-main.webp',
        media: [
            {type: 'image', src: 'classic2-1.webp'},
            {type: 'image', src: 'classic2-2.webp'},
			{type: 'image', src: 'classic2-3.webp'},
			{type: 'image', src: 'classic2-4.webp'},
			{type: 'image', src: 'classic2-5.webp'},
            
        ]
    },
	classic3: {
        main: 'classic3-main.webp',
        media: [
            {type: 'image', src: 'classic3-1.webp'},
            {type: 'image', src: 'classic3-2.webp'},
			{type: 'image', src: 'classic3-3.webp'},
			{type: 'image', src: 'classic3-4.webp'},
			{type: 'image', src: 'classic3-5.webp'},
            
        ]
    },
	culture: {
        main: 'culture-main.jpg',
        media: [
            {type: 'image', src: 'culture-1.webp'},
            {type: 'image', src: 'culture-2.webp'},
			{type: 'image', src: 'culture-3.webp'},
			{type: 'image', src: 'culture-4.webp'},
			{type: 'image', src: 'culture-5.webp'},
            
        ]
    },
	custom: {
        main: 'custom-main.jpg',
        media: [
            {type: 'image', src: 'custom-1.webp'},
            {type: 'image', src: 'custom-2.webp'},
			{type: 'image', src: 'custom-3.webp'},
			{type: 'image', src: 'custom-4.webp'},
			{type: 'image', src: 'custom-5.webp'},
            
        ]
    },
	airport: {
        main: 'airport-main.jpg',
        media: [
            {type: 'image', src: 'airport-1.webp'},
            {type: 'image', src: 'airport-2.webp'},
			{type: 'image', src: 'airport-3.webp'},
			{type: 'image', src: 'airport-4.webp'},
			{type: 'image', src: 'airport-5.webp'},
            
        ]
    }
};

let currentRoute = '';
let currentMediaIndex = 0;
		
		

        // ä¿®å¤åçš„selectRouteå‡½æ•°
function selectRoute(routeId) {
    const routeSelect = document.getElementById('routeSelect');
    if (!routeSelect) return;
    
    routeSelect.value = routeId;
    const preview = document.getElementById('selectedRoutePreview');
    const routeNameElement = document.getElementById('selectedRouteName');
    
    // è·å–è·¯çº¿åç§°
    const routeOption = document.querySelector(`[data-route="${routeId}"]`);
    if (routeOption) {
        const routeName = routeOption.querySelector('h3').innerText;
        const routeDetail = routeOption.querySelector('p').innerText;
        // æ›´æ–°æ˜¾ç¤ºå†…å®¹
        document.getElementById('selectedRouteName').innerHTML = `
            ğŸ—ºï¸ å·²é€‰è·¯çº¿ï¼š${routeName}
        `;
        document.getElementById('selectedRouteDetail').innerHTML = `
             è¡Œç¨‹åŒ…å«ï¼š${routeDetail}
        `;
        preview.style.display = 'block';
    }
    
    closeRouteModal();
    updateAllPrices();
}
		
		// æ˜¾ç¤ºå›¾é›†å‡½æ•°
function showGallery(routeId) {
    console.log('å°è¯•æ˜¾ç¤ºå›¾é›†ï¼Œè·¯çº¿ID:', routeId); // è°ƒè¯•1
    console.log('å›¾é›†æ•°æ®:', routeGallery[routeId]); // è°ƒè¯•2
	if (!routeGallery[routeId]) {
        console.error("æœªæ‰¾åˆ°è·¯çº¿å›¾é›†æ•°æ®:", routeId);
        return;
    }
    currentRoute = routeId;
    currentMediaIndex = 0;
    updateGalleryMedia();
    document.getElementById('galleryOverlay').style.display = 'flex';
}

// ä¿®å¤å…³é—­å‡½æ•°
function closeGallery() {
    document.getElementById('galleryOverlay').style.display = 'none';
}

// æ›´æ–°å›¾é›†å†…å®¹
function updateGalleryMedia() {
    console.log('å½“å‰åª’ä½“ç´¢å¼•:', currentMediaIndex); // è°ƒè¯•3
	const mediaList = routeGallery[currentRoute]?.media;
    if (!mediaList || currentMediaIndex >= mediaList.length) return;

    const media = mediaList[currentMediaIndex];
    const container = document.getElementById('galleryImage');
    if (!container) return;

    // æ¸…ç©ºå®¹å™¨å†…å®¹
    container.innerHTML = '';
	// æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ WebP
  const supportsWebP = (() => {
    const elem = document.createElement('canvas');
    return elem.toDataURL('image/webp').indexOf('data:image/webp') === 0;
  })();

  if (media.type === 'image') {
    const img = document.createElement('img');
    // ä¼˜å…ˆåŠ è½½ WebPï¼Œä¸æ”¯æŒåˆ™å›é€€ JPG
    img.src = supportsWebP ? `images/${media.src}` : `images/${media.src.replace('.webp', '.jpg')}`;
    img.className = 'gallery-media';
    container.appendChild(img);
  };  

    if (media.type === 'video') {
        const video = document.createElement('video');
        video.controls = true;
        video.autoplay = true;
        video.className = 'gallery-media'; // æ–°å¢ç»Ÿä¸€ç±»å
        const source = document.createElement('source');
        source.src = `videos/${media.src}`;
        source.type = 'video/mp4';
        video.appendChild(source);
        container.appendChild(video);
    }
}


function changeImage(step) {
    const total = routeGallery[currentRoute].media.length;
    currentMediaIndex = (currentMediaIndex + step + total) % total;
    updateGalleryMedia();
}

// æ·»åŠ é”®ç›˜å¯¼èˆª
document.addEventListener('keydown', (e) => {
    if(document.getElementById('galleryOverlay').style.display === 'block') {
        if(e.key === 'ArrowLeft') changeImage(-1);
        if(e.key === 'ArrowRight') changeImage(1);
        if(e.key === 'Escape') closeGallery();
    }
});

// æ·»åŠ æ»‘åŠ¨æ”¯æŒ
let touchStartX = 0;
document.querySelector('.gallery-container').addEventListener('touchstart', e => {
    touchStartX = e.touches[0].clientX;
});

document.querySelector('.gallery-container').addEventListener('touchend', e => {
    const touchEndX = e.changedTouches[0].clientX;
    const diff = touchStartX - touchEndX;
    if(Math.abs(diff) > 30) changeImage(diff > 0 ? 1 : -1);
});
		
        // è¡¨å•æäº¤
        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            // æ–°å¢ï¼šæ—¥æœŸèŒƒå›´è®¡ç®—
    const now = new Date();
    const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const todayEnd = new Date(todayStart.getTime() + 86400000);
    
    // æ–°å¢ï¼šè·å–æ¸…ç†åçš„æ‰‹æœºå·
    const phoneValue = document.getElementById('phone').value.replace(/[^0-9]/g, '');
    if (!phoneValue) return;

    // æ–°å¢ï¼šæŸ¥è¯¢å½“æ—¥é¢„çº¦æ¬¡æ•°
    try {
        const query = new AV.Query('Booking');
        query.greaterThanOrEqualTo('createdAt', todayStart.toISOString());
        query.lessThan('createdAt', todayEnd.toISOString());
        query.equalTo('phone', phoneValue);
        const count = await query.count();
        if (count >= 3) {
            alert('æ‚¨ä»Šæ—¥å·²é¢„çº¦3æ¬¡ï¼Œè¯·å‹¿é‡å¤æäº¤');
            return;
        }
    } catch (error) {
        console.error('é¢„çº¦æ¬¡æ•°æŸ¥è¯¢å¤±è´¥:', error);
        alert('ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•');
        return;
    }

            let isValid = true;
			// è½¦å‹éªŒè¯
    const selectedCar = document.querySelector('.car-card.active');
    if (!selectedCar) {
        alert('è¯·å…ˆé€‰æ‹©å‡ºè¡Œæ–¹å¼');
        return;
    }
    const carType = selectedCar.dataset.type;

    // è·¯çº¿éªŒè¯
    const route = document.getElementById('routeSelect').value;
    if (!route) {
        alert('è¯·é€‰æ‹©å‡ºè¡Œè·¯çº¿');
        return;
    }

    // ========== 2. æ‹¼è½¦ç‰¹æ®ŠéªŒè¯ ==========
    if (carType === 'shared') {
        const sharedCount = document.getElementById('sharedCount').value;
        if (!sharedCount || sharedCount < 1) {
            alert('è¯·é€‰æ‹©æ‹¼è½¦äººæ•°');
            return;
        }
    }

    // ========== 3. è·¯çº¿åŒ¹é…éªŒè¯ ==========
    
    if (route === 'airport' && carType !== 'airport') {
        alert('æ¥é€æœºæœåŠ¡è¯·é€‰æ‹©ä¸“ç”¨è½¦å‹');
        return;
    }
			
			// å¢å¼ºéªŒè¯é€»è¾‘
    const requiredFields = [
        {id: 'routeSelect', min: 1, type: 'select'}, // è·¯çº¿é€‰æ‹©éªŒè¯
        {id: 'departure', min: 2},
        {id: 'date'},
        {id: 'people'},
        {id: 'contact', min: 2},
        {id: 'phone', min: 11}
    ];

	// ä¿®æ”¹ç”µè¯éªŒè¯é€»è¾‘
    
if (phoneValue.length < 11) {
    document.getElementById('phone').style.borderColor = '#dc3545';
    isValid = false;
} else {
    document.getElementById('phone').style.borderColor = '#ddd';
}
			
    
    
    requiredFields.forEach(field => {
        const el = document.getElementById(field.id);
        if (!el.value || (field.min && el.value.length < field.min)) {
            el.style.borderColor = '#dc3545';
            isValid = false;
        } else {
            el.style.borderColor = '#ddd';
        }
    });

    if (!isValid) {
        alert('è¯·æ£€æŸ¥çº¢è‰²æ ‡è®°çš„å¿…å¡«é¡¹');
        return;
    }   
    

    // æ›´æ–°ä»·æ ¼è·å–é€»è¾‘
    let priceValue;
    if (carType === 'shared') {
        // ç›´æ¥ä½¿ç”¨å·²è®¡ç®—çš„æ‹¼è½¦ä»·æ ¼
        priceValue = parseInt(document.getElementById('sharedPrice').textContent) || 0;
    } else {
        const priceText = selectedCar.querySelector('.dynamic-price').textContent;
        priceValue = parseFloat(priceText.replace(/[^0-9.]/g, '')) || 0;
    }

			// è·å–è·¯çº¿å…¨ç§°
    const routeSelect = document.getElementById('routeSelect');
    const routeFullName = routeSelect.options[routeSelect.selectedIndex].text;

			 // è·å–è¡¨å•æ•°æ®
        const formData = {
        route: routeFullName, // ä¿®æ”¹è¿™é‡Œä½¿ç”¨å…¨ç§°
        departure: document.getElementById('departure').value,
        date: document.getElementById('date').value,
        people: parseInt(document.getElementById('people').value),
        contact: document.getElementById('contact').value,
        phone: document.getElementById('phone').value,
        carType: document.querySelector('.car-card.active h3').innerText,
        price: priceValue,
sharedCount: carType === 'shared' ? 
            parseInt(document.getElementById('sharedCount').value) : null,
        status: "å¾…å¤„ç†",
        createdAt: new Date().toISOString()
    };
            
            // æ•°æ®ä¿å­˜
            const Booking = AV.Object.extend('Booking');
            const booking = new Booking();
            
            booking.set("route", routeFullName); // è¿™é‡ŒåŒæ ·ä¿®æ”¹
            booking.set("departure", document.getElementById('departure').value);
        booking.set("date", document.getElementById('date').value);
        booking.set("people", parseInt(document.getElementById('people').value));
        booking.set("contact", document.getElementById('contact').value);
        booking.set("phone", document.getElementById('phone').value);
        booking.set("carType", selectedCar.querySelector('h3').innerText);
        booking.set("price", priceValue); // ä½¿ç”¨ç»Ÿä¸€çš„ä»·æ ¼å˜é‡
    // æ‹¼è½¦ç‰¹æ®Šå­—æ®µ
        if (carType === 'shared') {
            booking.set('sharedCount', parseInt(document.getElementById('sharedCount').value));
        }
        booking.set("status", "å¾…å¤„ç†");
            
            try {
                await booking.save();
                document.getElementById('bookingForm').reset(); // é‡ç½®è¡¨å•
        alert('é¢„çº¦æˆåŠŸï¼ç¨åå®¢æœä¼šä¸æ‚¨è”ç³»ï¼');
            } catch (error) {
                console.error('æäº¤å¤±è´¥:', error);
                alert('æäº¤å¤±è´¥ï¼Œè¯·ç›´æ¥è”ç³»å®¢æœ');
            }
        });

        // åˆå§‹åŒ–ç»‘å®šäº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // ç»‘å®šè½¦å‹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.car-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.car-card').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // ç»‘å®šæ¨¡æ€æ¡†å…³é—­äº‹ä»¶
            document.querySelectorAll('.route-modal, .gallery-overlay').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>
